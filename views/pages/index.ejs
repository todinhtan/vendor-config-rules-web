<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Vendor rules configuration</title>

  <!-- Bootstrap core CSS -->
  <link href="//stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" rel="stylesheet">
  <script src="//code.jquery.com/jquery-3.3.1.min.js"></script>

  <style>
    html,
    body {
      height: 100%;
    }

    body {
      display: -ms-flexbox;
      display: -webkit-box;
      display: flex;
      -ms-flex-align: center;
      -ms-flex-pack: center;
      -webkit-box-align: center;
      align-items: center;
      -webkit-box-pack: center;
      justify-content: center;
      padding-top: 40px;
      padding-bottom: 40px;
      background-color: #f5f5f5;
      flex-wrap: wrap;
    }

    .form-signin {
      width: 100%;
      max-width: 330px;
      padding: 15px;
      margin: 0 auto;
    }
    .form-signin .checkbox {
      font-weight: 400;
    }
    .form-signin .form-control {
      position: relative;
      box-sizing: border-box;
      height: auto;
      padding: 10px;
      font-size: 16px;
    }
    .form-signin .form-control:focus {
      z-index: 2;
    }
    .form-signin input[type="email"] {
      margin-bottom: -1px;
      border-bottom-right-radius: 0;
      border-bottom-left-radius: 0;
    }
    .form-signin input[type="password"] {
      margin-bottom: 10px;
      border-top-left-radius: 0;
      border-top-right-radius: 0;
    }
    .line {
      width: 100%;
    }
  </style>
</head>

<body class="text-center">
  <div class="line">
    <form action="/" class="form-signin">
      <h1 class="h3 mb-3 font-weight-normal">Type vendor ID</h1>
      <label for="inputVendorId" class="sr-only">Vendor ID</label>
      <input type="text" name="vendorId" id="inputVendorId" class="form-control" placeholder="Vendor ID" required="" autofocus="">
      <button class="btn btn-lg btn-primary btn-block" type="submit">Go</button>
    </form>
  </div>
  <% if (rules && rules.filters) { %>
  <div class="line text-left">
    <form action="/vendor/<%= vendorId %>" class="form-signin" method="POST">
      <h2 class="h3 mb-3 font-weight-normal text-center"><%= vendorId %> rules</h2>
      <h2 class="h5 mt-2 mb-1 font-weight-normal">Filter types</h2>
      <div class="form-check form-check-inline">
        <input <%= rules.filters.filterTypes.includes('act') ? 'checked' : '' %> class="form-check-input" type="checkbox" id="chkAct" name="filterTypes[]" value="act">
        <label class="form-check-label" for="chkAct">act</label>
      </div>
      <div class="form-check form-check-inline">
        <input <%= rules.filters.filterTypes.includes('noAct') ? 'checked' : '' %> class="form-check-input" type="checkbox" id="chkNoAct" name="filterTypes[]" value="noAct">
        <label class="form-check-label" for="chkNoAct">noAct</label>
      </div>

      <div class="act">
        <% if (rules.filters.filterTypes.includes('act')) { %>
          <h2 class="h5 mt-2 mb-1 font-weight-normal">act</h2>
          <input class="form-control" type="text" placeholder="resetPeriod" name="act[resetPeriod]" value="<%= rules.filters.act.resetPeriod %>">
        <% } %>
      </div>

      <div class="no-act">
        <% if (rules.filters.filterTypes.includes('noAct')) { %>
          <h2 class="h5 mt-2 mb-1 font-weight-normal">noAct</h2>
          <input class="form-control" type="text" placeholder="days" name="noAct[days]" value="<%= rules.filters.noAct.days %>">
          <input class="form-control" type="text" placeholder="resetPeriod" name="noAct[resetPeriod]" value="<%= rules.filters.noAct.resetPeriod %>">
        <% } %>
      </div>
      <button type="submit" class="mt-2 btn btn-primary">Save</button>
    </form>
  </div>
  <% } %>

  <div class="act-template" style="display: none;">
    <h2 class="h5 mt-2 mb-1 font-weight-normal">act</h2>
    <input class="form-control" type="text" placeholder="resetPeriod" name="act[resetPeriod]">
  </div>
  <div class="no-act-template" style="display: none;">
    <h2 class="h5 mt-2 mb-1 font-weight-normal">noAct</h2>
    <input class="form-control" type="text" placeholder="days" name="noAct[days]">
    <input class="form-control" type="text" placeholder="resetPeriod" name="noAct[resetPeriod]">
  </div>
</body>

<script>
  $('#chkAct').on('click', function(e) {
    if ($(this).is(":checked")) $('.act').html($('.act-template').html());
    else $('.act').html('');
  })
  $('#chkNoAct').on('click', function(e) {
    if ($(this).is(":checked")) $('.no-act').html($('.no-act-template').html());
    else $('.no-act').html('');
  })
</script>

</html>